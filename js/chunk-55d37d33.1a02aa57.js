(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55d37d33"],{"4c4f":function(t,e,i){},"4cfb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit"},[i("div",{staticClass:"edit-title"},[t._v(t._s(t.title))]),i("div",{staticClass:"edit-cap"},[t._v("信息")]),i("div",{staticClass:"edit-cap-main"},[i("div",{staticClass:"edit-cap-edit"},[i("div",{staticClass:"edit-cap-title"},[i("div",{staticClass:"edit-text"},[t._v("Title")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.article.title,expression:"article.title"}],staticClass:"edit-cap-title-input",attrs:{type:"text",placeholder:"文章标题"},domProps:{value:t.article.title},on:{input:function(e){e.target.composing||t.$set(t.article,"title",e.target.value)}}})]),i("div",{staticClass:"edit-cap-category"},[i("div",{staticClass:"edit-text"},[t._v("Category")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.article.category_id,expression:"article.category_id"}],staticClass:"edit-cap-category-select",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.article,"category_id",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("分类")]),t._l(t.categories,(function(e){return i("option",{key:e.title,domProps:{value:e.id}},[t._v(t._s(e.title))])}))],2)]),i("div",{staticClass:"edit-cap-content"},[i("div",{staticClass:"edit-text"},[t._v("Content")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.article.content,expression:"article.content"}],staticClass:"edit-cap-content-input",attrs:{placeholder:"文章内容"},domProps:{value:t.article.content},on:{input:function(e){e.target.composing||t.$set(t.article,"content",e.target.value)}}})]),i("div",{staticClass:"edit-cap-button",class:{divHidden:!t.isAddArticle},on:{click:t.addArticle}},[t._v("创建")]),i("div",{staticClass:"edit-cap-button",class:{divHidden:t.isAddArticle},on:{click:t.putArticle}},[t._v("修改")])]),i("div",{staticClass:"edit-cap-view markdown-body",domProps:{innerHTML:t._s(t.md.render(t.article.content))}},[t._v(" "+t._s(t.md.render(t.article.content))+" ")])])])},s=[],c=i("fd03"),r={data(){return{isAddArticle:!0,title:"",article:{content:""},categories:[],content:"",md:i("d4cd")()}},created(){this.$route.query.id?(this.isAddArticle=!1,this.title="修改文章",this.article.id=this.$route.query.id):(this.isAddArticle=!0,this.title="添加文章"),this.initPage()},methods:{async initPage(){let t=await Object(c["k"])();if(200==t.status){if(this.categories=t.data.data,!this.isAddArticle){if(t=await Object(c["h"])(this.article.id),200!=t.status)return void this.$store.dispatch("changeTipsMsg","加载文章失败");this.article=t.data.data}}else this.$store.dispatch("changeTipsMsg","加载分类失败")},async addArticle(){if(!this.article.title||!this.article.category_id||!this.article.content)return void this.$store.dispatch("changeTipsMsg","检查空值");this.article.created_at=this.getNowFormatDate();const t=await Object(c["a"])(this.article);this.$store.dispatch("changeTipsMsg",t.data.msg),200==t.status&&(this.$store.dispatch("changeActiveItem","/articles"),this.$router.push({name:"articles"}))},async putArticle(){if(!this.article.title||!this.article.category_id||!this.article.content)return void this.$store.dispatch("changeTipsMsg","检查空值");this.article.updated_at=this.getNowFormatDate();const t=await Object(c["q"])(this.article);this.$store.dispatch("changeTipsMsg",t.data.msg),200==t.status&&this.$router.push({name:"articles"})},getNowFormatDate(){const t=new Date,e="-",i=t.getFullYear();let a=t.getMonth()+1,s=t.getDate();a>=1&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s);const c=i+e+a+e+s;return c}}},l=r,d=(i("7b56"),i("2877")),n=Object(d["a"])(l,a,s,!1,null,"6e96610e",null);e["default"]=n.exports},"7b56":function(t,e,i){"use strict";var a=i("4c4f"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-55d37d33.1a02aa57.js.map